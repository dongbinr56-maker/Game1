# 01_PRD — 개발 정의서(제품 요구사항)

## 1. 목적(Goal)
모바일 세로 앱에서 동작하는 “도트풍 자동 방치형 카페”의 MVP를 제작한다.
- 사용자는 앱을 켜두지 않아도(방치/오프라인) 일정 수익을 얻는다.
- 사용자 입력은 “업그레이드 구매” 중심이며, 조작 난이도는 낮다.

## 2. 범위(Scope)
### 포함(In)
- Flutter + Flame 기반(유니티 금지)
- 16px 타일 기반 도트 렌더링(픽셀 퍼펙트)
- 코어 루프(손님→주문→제조→결제→코인→업그레이드)
- 업그레이드 4종(좌석/제조/결제/직원)
- 오프라인 정산(12시간 cap)
- 저장/로드(세이브 버전 v1)
- 세로 UI: 상단 HUD + 하단 탭(2개: 업그레이드/직원)

### 제외(Out) — MVP에서 하지 않는다
- 재료(원두/우유 등) 소모/구매
- 네트워크/서버/계정/클라우드 세이브
- 광고/결제/IAP(향후)
- 복잡한 길찾기(A*) — MVP는 단순 waypoint 또는 “처리량 기반 추상화”로 충분
- 멀티 지점/프랜차이즈 시스템(향후 콘텐츠)

## 3. 사용자 스토리(User Stories)
- US-01: 사용자는 앱을 켜면 바로 손님이 들어오고 코인이 증가하는 것을 본다.
- US-02: 사용자는 업그레이드를 구매하면 분당 코인이 늘어나는 것을 체감한다.
- US-03: 사용자는 앱을 껐다가 다시 켜면 오프라인 수익을 정산받는다.
- US-04: 사용자는 현재 병목(좌석/제조/결제/직원)을 HUD/안내로 파악한다.

## 4. 기능 요구사항(FR)
### FR-01 코어 루프
- 손님 스폰 → 주문 생성 → 처리(제조/결제) → 코인 증가 → 손님 퇴장

### FR-02 업그레이드
- Seat: 좌석/수용량 증가
- Brew: 제조 처리 속도 증가(제조 시간 감소)
- Cashier: 결제 처리 속도 증가(결제 시간 감소)
- Staff: 직원 효율 증가(직원 수 증가 또는 속도 계수 증가; MVP에서는 “효율 계수”로 단순화 권장)

### FR-03 오프라인 정산
- lastSavedAt 저장
- 재실행 시 elapsed 계산
- coins += coinsPerMin * min(elapsedMin, cap=720min)

### FR-04 저장/로드
- 세이브 v1 저장/로드
- 앱 백그라운드 전환 시 자동 저장
- 크래시/강제 종료 상황에서도 최대한 일관성 유지(Atomic write 권장)

### FR-05 UI
- 상단 HUD: 현재 코인, 분당 코인, 대기열(또는 손님 수), 병목 안내(1줄)
- 하단 탭: 업그레이드/직원

## 5. 비기능 요구사항(NFR)
- NFR-01 성능: 저사양 안드로이드에서도 30분 플레이 시 프레임 드랍/메모리 폭주 없음
- NFR-02 안정성: 저장/로드 50회 반복 무결성 유지
- NFR-03 배터리: 경제 업데이트는 1초 틱(프레임마다 금지)
- NFR-04 접근성: 버튼 터치 영역 충분(큰 버튼), 텍스트 대비 확보

## 6. 완료 기준(DoD)
- README의 MVP DoD와 동일(참조)
